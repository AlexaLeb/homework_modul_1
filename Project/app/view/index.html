{% extends "base.html" %}

{# ---------- заголовок вкладки ---------- #}
{% block title %}Добро пожаловать!{% endblock %}

{# ---------- дополнительные стили ---------- #}
{% block head %}
    {{ super() }}
    <style>
        .hero            { text-align:center; padding:2rem 0; }
        .hero h1         { margin-bottom:.5rem; font-size:2.2rem; }
        .hero p.lead     { font-size:1.1rem; color:#555; }
        .btn             { display:inline-block; margin:.5rem 1rem;
                           padding:.6rem 1.2rem; border-radius:6px;
                           background:#336699; color:#fff; text-decoration:none; }
        .btn.secondary   { background:#999; }
        .features        { margin:2rem auto; max-width:760px; }
        .features h3     { margin-top:1.5rem; }
        .features li     { margin:.4rem 0; }
        .contact         { text-align:center; font-size:.9rem; color:#666; }
    </style>
{% endblock %}

{# ---------- основное содержимое ---------- #}
{% block content %}
<div class="hero">
    <h1>ML&nbsp;Budget&nbsp;Assistant</h1>
    <p class="lead">
        Умный сервис, который анализирует ваши расходы и&nbsp;советует,
        как оптимально распределить бюджет с&nbsp;помощью&nbsp;ML‑модели.
    </p>

    {% if user %}
    <h2>You are logged in :)</h2>
    <p>
        Hi {{ user }}! You are logged in, so you can access the private
        page. <a href="/private">here</a>!
        <a href="api/balance" class="btn">Перейти в кабинет</a>
        <a href="api/model" class="btn secondary">Предсказание</a>
    </p>
    {% else %}
        <h2>You are NOT logged in :(</h2>
    <p>
        Hello stranger. You are not logged. Please follow the link to
        <a href="/login/login" class="btn">login</a>
        or
        <a href="/api/users/signup" class="btn">create an account</a>
    </p>
    {% endif %}
</div>

<div class="features">
    <h2>Как это работает?</h2>

    <h3>1. Регистрация и кошелёк</h3>
    <p>Создайте аккаунт, пополните внутренний кошелёк условными кредитами — каждое предсказание стоит&nbsp;50&nbsp;кредитов.</p>

    <h3>2. Загрузка данных</h3>
    <p>Через веб‑форму или REST API загрузите историю транзакций (CSV/JSON) — система проверит данные и отдаст ошибки, если они есть.</p>

    <h3>3. Предсказание бюджета</h3>
    <ul>
        <li>Запрос отправляется в&nbsp;<strong>очередь&nbsp;RabbitMQ</strong>.</li>
        <li>Несколько воркеров параллельно обрабатывают задачи.</li>
        <li>ML‑модель возвращает рекомендованное распределение средств и&nbsp;сохраняет результат в&nbsp;ваш личный кабинет.</li>
    </ul>

    <h3>4. История и аналитика</h3>
    <p>Просматривайте историю всех запросов и&nbsp;списаний кредитов в&nbsp;одном месте. Данные хранятся в&nbsp;PostgreSQL; мониторинг обеспечивают Grafana&nbsp;/ Prometheus.</p>
</div>

<hr>

<div class="contact">
    <p>Есть вопросы? Пишите на&nbsp;<a href="mailto:support@example.com">support@example.com</a></p>
    <p>Версия&nbsp;{{ build_version | default('dev') }}</p>
</div>
{% endblock %}